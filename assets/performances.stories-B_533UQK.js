import{c as C}from"./index-DX8y_bUt.js";import{r as u,R as O}from"./index-CDs2tPxN.js";import{g as D,X as T,Y as b,S as Z,c as l,z as _,a as R,K as V}from"./utils-D1jM7My1.js";import{g as A}from"./vectors-BMNFZSin.js";/* empty css                        */import{l as g}from"./lodash-B2soob2o.js";import"./chroma-vMwKRLDS.js";const x=+new Date("2024/01/01"),L=["#9E8256","#FF362E","#FF8E3D","#FFBF00","#95C877","#78E6C5","#66C0F1","#526CE8","#D16DBC","#FF9BC6"],z=({operationalPointsCount:c,trainTypes:m,pathsPerTrain:d,spaceScaleType:h})=>{const s=u.useMemo(()=>{let t=0;return g.range(c).map(e=>({id:`op-${e}`,label:`Operational point n°${e+1}`,position:t+=g.random(5e4,15e4),importanceLevel:!e||e===c-1||Math.random()>.8?1:2}))},[c]),F=u.useMemo(()=>{const t=s,e=t.filter(a=>a.importanceLevel===1),f=t.slice(0).reverse(),r=e.slice(0).reverse();return g.range(m).flatMap(a=>{const o=a%2,i=Math.floor(a/2)%2,M=(100+100*(Math.floor(a/2)/Math.floor(m/2)))*V/(60*l);return D(`type n°${a}`,i?o?f:t:o?r:e,5*l,(30+a*5)*l,M*(o?-1:1),d,x,{color:L[a%L.length],fromEnd:i?"out":"stop",toEnd:i?"out":"stop"})})},[s,m,d]),[n,E]=u.useState({xOffset:0,yOffset:0,xZoomLevel:T,yZoomLevel:b,panning:null});return O.createElement("div",{className:"inset-0"},O.createElement(Z,{className:C("inset-0 absolute p-0 m-0",n.panning&&"cursor-grabbing"),operationalPoints:s,spaceOrigin:0,spaceScales:s.slice(0,-1).map((t,e)=>({from:t.position,to:s[e+1].position,...h==="linear"?{size:50*n.yZoomLevel}:{coefficient:150/n.yZoomLevel}})),timeOrigin:x,timeScale:l/n.xZoomLevel,xOffset:n.xOffset,yOffset:n.yOffset,onPan:({initialPosition:t,position:e,isPanning:f})=>{const{panning:r}=n,a=A(t,e);E(o=>{if(f)if(r){const i=r.initialOffset.x+a.x,y=r.initialOffset.y+a.y;return{...o,xOffset:i,yOffset:y}}else return{...o,panning:{initialOffset:{x:o.xOffset,y:o.yOffset}}};else return{...o,panning:null}})},onZoom:t=>{E(e=>({...e,..._(e,t)}))}},F.map((t,e)=>O.createElement(R,{key:t.id,index:e,path:t,color:t.color}))))},w={title:"SpaceTimeChart/Performances",component:z,argTypes:{operationalPointsCount:{name:"Operational points",defaultValue:5,control:{type:"number",step:1,min:2,max:30}},trainTypes:{name:"Train types",defaultValue:4,control:{type:"number",step:1,min:1,max:20}},pathsPerTrain:{name:"Paths per train type",defaultValue:50,control:{type:"number",step:10,min:0,max:200}},spaceScaleType:{name:"Space scaling type",options:["linear","proportional"],defaultValue:"linear",control:{type:"radio"}}}},p={name:"Default arguments",args:{operationalPointsCount:5,trainTypes:4,pathsPerTrain:50,spaceScaleType:"linear"}};var S,v,P;p.parameters={...p.parameters,docs:{...(S=p.parameters)==null?void 0:S.docs,source:{originalSource:`{
  name: 'Default arguments',
  args: {
    operationalPointsCount: 5,
    trainTypes: 4,
    pathsPerTrain: 50,
    spaceScaleType: 'linear'
  }
}`,...(P=(v=p.parameters)==null?void 0:v.docs)==null?void 0:P.source}}};const U=["DefaultArgs"];export{p as DefaultArgs,U as __namedExportsOrder,w as default};
