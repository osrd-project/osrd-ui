import{c as M}from"./index-DX8y_bUt.js";import{r as f,R as u}from"./index-CDs2tPxN.js";import{g as S,X as h,Y as P,S as C,c as l,z as D,a as b,K as Z}from"./utils-CC6EGafI.js";import{g as _}from"./vectors-BiytCEVh.js";/* empty css                        */import{l as O}from"./lodash-B2soob2o.js";import"./chroma-vMwKRLDS.js";const y=+new Date("2024/01/01"),x=["#9E8256","#FF362E","#FF8E3D","#FFBF00","#95C877","#78E6C5","#66C0F1","#526CE8","#D16DBC","#FF9BC6"],R=({operationalPointsCount:p,trainTypes:c,pathsPerTrain:g,spaceScaleType:L})=>{const n=f.useMemo(()=>{let t=0;return O.range(p).map(e=>({id:`op-${e}`,label:`Operational point n°${e+1}`,position:t+=O.random(5e4,15e4),importanceLevel:!e||e===p-1||Math.random()>.8?1:2}))},[p]),v=f.useMemo(()=>{const t=n,e=t.filter(o=>o.importanceLevel===1),m=t.slice(0).reverse(),r=e.slice(0).reverse();return O.range(c).flatMap(o=>{const a=o%2,i=Math.floor(o/2)%2,F=(100+100*(Math.floor(o/2)/Math.floor(c/2)))*Z/(60*l);return S(`type n°${o}`,i?a?m:t:a?r:e,5*l,(30+o*5)*l,F*(a?-1:1),g,y,{color:x[o%x.length],fromEnd:i?"out":"stop",toEnd:i?"out":"stop"})})},[n,c,g]),[s,E]=f.useState({xOffset:0,yOffset:0,xZoomLevel:h,yZoomLevel:P,panning:null});return u.createElement("div",{className:"inset-0"},u.createElement(C,{className:M("inset-0 absolute p-0 m-0",s.panning&&"cursor-grabbing"),operationalPoints:n,spaceOrigin:0,spaceScales:n.slice(0,-1).map((t,e)=>({from:t.position,to:n[e+1].position,...L==="linear"?{size:50*s.yZoomLevel}:{coefficient:150/s.yZoomLevel}})),timeOrigin:y,timeScale:l/s.xZoomLevel,xOffset:s.xOffset,yOffset:s.yOffset,onPan:({initialPosition:t,position:e,isPanning:m})=>{const{panning:r}=s,o=_(t,e);E(a=>{if(m)if(r){const i=r.initialOffset.x+o.x,d=r.initialOffset.y+o.y;return{...a,xOffset:i,yOffset:d}}else return{...a,panning:{initialOffset:{x:a.xOffset,y:a.yOffset}}};else return{...a,panning:null}})},onZoom:t=>{E(e=>({...e,...D(e,t)}))}},v.map((t,e)=>u.createElement(b,{key:t.id,index:e,path:t,color:t.color}))))},K={title:"SpaceTimeChart/Performances",component:R,argTypes:{operationalPointsCount:{name:"Operational points",defaultValue:5,control:{type:"number",step:1,min:2,max:30}},trainTypes:{name:"Train types",defaultValue:4,control:{type:"number",step:1,min:1,max:20}},pathsPerTrain:{name:"Paths per train type",defaultValue:50,control:{type:"number",step:10,min:0,max:200}},spaceScaleType:{name:"Space scaling type",options:["linear","proportional"],defaultValue:"linear",control:{type:"radio"}}}},X={name:"Default arguments",args:{operationalPointsCount:5,trainTypes:4,pathsPerTrain:50,spaceScaleType:"linear"}},Y=["DefaultArgs"];export{X as DefaultArgs,Y as __namedExportsOrder,K as default};
