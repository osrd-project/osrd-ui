import{c as x}from"./index-DX8y_bUt.js";import{r as c,R as t}from"./index-CDs2tPxN.js";import{l as u}from"./lodash-B2soob2o.js";import{X as O,Y as T,S as h,O as f,z as k,P as S,a as L,b as g,M as v,W as b}from"./utils-CC6EGafI.js";import{g as D}from"./vectors-BiytCEVh.js";import"./chroma-vMwKRLDS.js";const M=({p1:a,p2:e})=>t.createElement("svg",{width:"100%",height:"100%"},t.createElement("line",{x1:a.x,y1:a.y,x2:e.x,y2:e.y,stroke:"black",strokeWidth:"2",strokeDasharray:"5, 5"}));function C(a){const e=a.getTime(),o=e>=0?"+":"-";let i=Math.abs(e);const n=Math.floor(i/(1e3*60*60));i-=n*1e3*60*60;const s=Math.floor(i/(1e3*60));let l=o;return n>0&&(l+=`${n} hour${n>1?"s":""}`),s>0&&(n>0&&(l+=" "),l+=`${s} minute${s>1?"s":""}`),l.trim()}const d=({data:a,position:e,isDiff:o,marginTop:i=0})=>t.createElement("div",{style:{position:"absolute",top:e.y+i,left:e.x,whiteSpace:"nowrap",background:b,fontSize:"0.7em"}},o?t.createElement(t.Fragment,null,t.createElement("div",null,"Time difference: ",C(new Date(a.time))),t.createElement("div",null,"Distance to mark: ",u.round(a.position).toLocaleString()," m")):t.createElement(t.Fragment,null,t.createElement("div",null,"Time: ",new Date(a.time).toLocaleTimeString()),t.createElement("div",null,"Distance: ",u.round(a.position).toLocaleString()," m"))),P=({reference:a})=>{const{getPoint:e}=c.useContext(g),{position:o,data:i,isHover:n}=c.useContext(v);return n?t.createElement(t.Fragment,null,!!a&&t.createElement(M,{p1:o,p2:e(a)}),t.createElement(d,{data:a?{position:i.position-a.position,time:i.time-a.time}:i,position:o,isDiff:!!a,marginTop:30})):null},_=({data:a})=>{const{getPoint:e}=c.useContext(g),o=e(a);return t.createElement("div",null,t.createElement("div",{style:{position:"absolute",top:o.y,left:o.x,width:3,height:3,margin:"-1 -1",background:"black"}}),t.createElement(d,{data:a,position:o,marginTop:5}))},w=({spaceScaleType:a})=>{var i;const[e,o]=c.useState({xOffset:0,yOffset:0,xZoomLevel:O,yZoomLevel:T,panTarget:null,mark:null});return t.createElement("div",{className:"inset-0"},t.createElement(h,{className:x("inset-0 absolute overflow-hidden p-0 m-0",e.panTarget&&"cursor-grabbing"),operationalPoints:f,spaceOrigin:0,spaceScales:f.slice(0,-1).map((n,s)=>({from:n.position,to:f[s+1].position,...a==="linear"?{size:50*e.yZoomLevel}:{coefficient:150/e.yZoomLevel}})),timeOrigin:+new Date("2024/04/02"),timeScale:6e4/e.xZoomLevel,xOffset:e.xOffset,yOffset:e.yOffset,onClick:({data:n})=>{e.panTarget||o({...e,mark:e.mark?null:{data:n}})},onPan:({initialPosition:n,position:s,isPanning:l})=>{const{panTarget:m}=e,p=D(n,s);if(!l)o(r=>({...r,panTarget:null}));else if(!m)o(r=>({...r,panTarget:{type:"stage",initialOffset:{x:r.xOffset,y:r.yOffset}}}));else if(m.type==="stage"){const r=m.initialOffset.x+p.x,y=m.initialOffset.y+p.y;o(E=>({...E,xOffset:r,yOffset:y}))}},onZoom:n=>{o(s=>({...s,...k(s,n)}))}},S.map((n,s)=>t.createElement(L,{key:n.id,index:s,path:n,color:n.color})),t.createElement(P,{reference:(i=e.mark)==null?void 0:i.data}),e.mark&&t.createElement(_,{data:e.mark.data})))},F={title:"SpaceTimeChart/Measuring times and distances",component:w,argTypes:{spaceScaleType:{name:"Space scaling type",options:["linear","proportional"],defaultValue:"linear",control:{type:"radio"}}}},H={name:"Default arguments",args:{spaceScaleType:"linear"}},I=["DefaultArgs"];export{H as DefaultArgs,I as __namedExportsOrder,F as default};
