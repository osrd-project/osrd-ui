import{u as T,L as P,g as E,B as A,O as u,W as _,a as b,P as I,b as y,D as e}from"./helpers-YLlfLgms.js";import{f as D,S as p,L as l}from"./exports-maplibre-DyOGFD38.js";import{R as t,r as m}from"./index-CDs2tPxN.js";import"./lodash-B2soob2o.js";import"./index-B-yFm4aN.js";import"./iframe-B-jqbcF-.js";import"../sb-preview/runtime.js";const c=[b],O={id:"path-layer",source:"path",type:"line",paint:{"line-width":1,"line-color":"blue"}},N=({path:r,warpingOptions:a})=>{const{grid:o,warpedGrid:n}=m.useMemo(()=>E(r,a),[r,a]),s=m.useMemo(()=>D([r]),[r]);return t.createElement("div",{style:{background:"lightgrey",display:"flex",flexDirection:"row",alignItems:"stretch",position:"absolute",inset:0}},t.createElement("div",{style:{marginRight:"1em",flexGrow:1}},t.createElement(A,{path:r,sources:c,mapStyle:u},t.createElement(p,{type:"geojson",data:s},t.createElement(l,{id:"path-layer",source:"path",type:"line",paint:{"line-width":1,"line-color":"blue"}})),t.createElement(p,{type:"geojson",data:o},t.createElement(l,{id:"grid-layer",source:"grid",type:"line",paint:{"line-width":1,"line-color":"red"}})))),t.createElement("div",{style:{flexGrow:1}},t.createElement(_,{log:!0,path:r,pathLayer:O,sources:c,mapStyle:u,warpingOptions:a},t.createElement(p,{type:"geojson",data:n},t.createElement(l,{id:"grid-layer",source:"grid",type:"line",paint:{"line-width":1,"line-color":"red"}})))))},f=r=>{const{path:a,...o}=r,n=T(()=>fetch(`/${a}.json`).then(S=>S.json()),[a]),s=n.type==="ready"?n.data:null;return s?t.createElement(N,{key:a,path:s,warpingOptions:o}):t.createElement(P,null)};f.__docgenInfo={description:"",methods:[],displayName:"Algorithms",props:{path:{required:!0,tsType:{name:"string"},description:""},tolerance:{required:!0,tsType:{name:"number"},description:""},samplesCount:{required:!0,tsType:{name:"number"},description:""},straightenForce:{required:!0,tsType:{name:"number"},description:""},straightenIterations:{required:!0,tsType:{name:"number"},description:""},quadtreeDepth:{required:!0,tsType:{name:"number"},description:""},stripsPerSide:{required:!0,tsType:{name:"number"},description:""}}};const W={component:f,title:"WarpedMap algorithms",argTypes:{path:{name:"Path",description:"Which path to warp on",options:I,defaultValue:y,control:{type:"radio"}},tolerance:{name:"Tolerance",description:"The tolerance for turf.simplify",defaultValue:e.tolerance,type:"number",control:{type:"range",min:0,max:1,step:.005,defaultValue:e.tolerance}},stripsPerSide:{name:"Strips per side",description:"The number of strips on each side of the grid",defaultValue:e.stripsPerSide,type:"number",control:{type:"number",min:1,step:1,defaultValue:e.stripsPerSide}},samplesCount:{name:"Samples count",description:"The number of samples on the grid",defaultValue:e.samplesCount,type:"number",control:{type:"number",min:3,step:1,defaultValue:e.samplesCount}},straightenForce:{name:"Straighten force",description:"The strength of the force to strengthen on.",defaultValue:e.straightenForce,type:"number",control:{type:"range",min:0,max:1,step:.005,defaultValue:e.straightenForce}},straightenIterations:{name:"Straighten iterations",description:"The number of strenghtening iterations.",defaultValue:e.straightenIterations,type:"number",control:{type:"number",min:1,step:1,defaultValue:e.straightenIterations}},quadtreeDepth:{name:"Quadtree depth",description:"The maximum depth of the quadtree",defaultValue:e.quadtreeDepth,type:"number",control:{type:"number",min:1,step:1,defaultValue:e.quadtreeDepth}}}},i={name:"Default settings",args:{path:y,tolerance:e.tolerance,stripsPerSide:e.stripsPerSide,samplesCount:e.samplesCount,straightenForce:e.straightenForce,straightenIterations:e.straightenIterations,quadtreeDepth:e.quadtreeDepth}};var d,h,g;i.parameters={...i.parameters,docs:{...(d=i.parameters)==null?void 0:d.docs,source:{originalSource:`{
  name: 'Default settings',
  args: {
    path: PATH_LONG,
    tolerance: DEFAULT_WARPING_OPTIONS.tolerance,
    stripsPerSide: DEFAULT_WARPING_OPTIONS.stripsPerSide,
    samplesCount: DEFAULT_WARPING_OPTIONS.samplesCount,
    straightenForce: DEFAULT_WARPING_OPTIONS.straightenForce,
    straightenIterations: DEFAULT_WARPING_OPTIONS.straightenIterations,
    quadtreeDepth: DEFAULT_WARPING_OPTIONS.quadtreeDepth
  }
}`,...(g=(h=i.parameters)==null?void 0:h.docs)==null?void 0:g.source}}};const x=["DefaultSettings"];export{i as DefaultSettings,x as __namedExportsOrder,W as default};
