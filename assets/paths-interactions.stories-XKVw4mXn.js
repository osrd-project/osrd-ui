import{c as L}from"./index-DX8y_bUt.js";import{r as v,R as x}from"./index-CDs2tPxN.js";import{P as b,X as D,Y as Z,S as _,O as h,z as w,a as A}from"./utils-CC6EGafI.js";import{g as V}from"./vectors-BiytCEVh.js";/* empty css                        */import"./lodash-B2soob2o.js";import"./chroma-vMwKRLDS.js";function k(f,O){const u=O-f.points[0].time;return{...f,points:f.points.map(g=>({...g,time:g.time+u}))}}const z=({enableDragPaths:f,pickingTolerance:O,enableMultiSelection:u,spaceScaleType:g})=>{const[S,E]=v.useState(b),[t,s]=v.useState({xOffset:0,yOffset:0,xZoomLevel:D,yZoomLevel:Z,selection:null,panTarget:null,hoveredPath:null});return x.createElement("div",{className:"inset-0"},x.createElement(_,{className:L("inset-0 absolute p-0 m-0",t.panTarget&&"cursor-grabbing",t.hoveredPath&&"cursor-pointer"),operationalPoints:h,spaceOrigin:0,spaceScales:h.slice(0,-1).map((a,e)=>({from:a.position,to:h[e+1].position,...g==="linear"?{size:50*t.yZoomLevel}:{coefficient:150/t.yZoomLevel}})),timeOrigin:+new Date("2024/04/02"),timeScale:6e4/t.xZoomLevel,xOffset:t.xOffset,yOffset:t.yOffset,onClick:({event:a})=>{const{hoveredPath:e,selection:l,panTarget:r}=t;if(!r)if(!e)(!u||!a.ctrlKey)&&s(i=>({...i,selection:null}));else if(!l)s({...t,selection:new Set([e.index])});else if(!u||!a.ctrlKey)s({...t,selection:l.has(e.index)?null:new Set([e.index])});else{const i=new Set(l);i.has(e.index)?i.delete(e.index):i.add(e.index),s({...t,selection:i.size?i:null})}},onHoveredChildUpdate:({item:a})=>{s(e=>({...e,hoveredPath:a}))},onPan:({initialPosition:a,position:e,initialData:l,data:r,isPanning:i})=>{const{panTarget:o,hoveredPath:c,selection:y}=t,T=V(a,e);if(!i)s(n=>({...n,panTarget:null}));else if(!o&&f&&c){const n=y!=null&&y.has(c.index)?y:new Set([c.index]);s(p=>({...p,selection:n,panTarget:{type:"items",initialTimeOrigins:Array.from(n).reduce((m,d)=>({...m,[d]:S[d].points[0].time}),{})}}))}else if(!o)s(n=>({...n,panTarget:{type:"stage",initialOffset:{x:n.xOffset,y:n.yOffset}}}));else if(o.type==="stage"){const n=o.initialOffset.x+T.x,p=o.initialOffset.y+T.y;s(m=>({...m,xOffset:n,yOffset:p}))}else if(o.type==="items"){const{initialTimeOrigins:n}=o,p=r.time-l.time;E(m=>m.map((d,P)=>n[P]?k(d,n[P]+p):d))}},onZoom:a=>{s(e=>({...e,...w(e,a)}))}},S.map((a,e)=>{var l,r,i,o,c;return x.createElement(A,{key:a.id,index:e,path:a,color:a.color,pickingTolerance:O,level:((l=t.panTarget)==null?void 0:l.type)==="items"?(r=t.selection)!=null&&r.has(e)?1:4:(i=t.selection)!=null&&i.has(e)||((o=t.hoveredPath)==null?void 0:o.index)===e?1:(c=t.selection)!=null&&c.size?3:2})})))},X={title:"SpaceTimeChart/Paths interactions",component:z,argTypes:{enableDragPaths:{name:"Enable dragging paths?",defaultValue:!0,control:{type:"boolean"}},enableMultiSelection:{name:"Multi-selection?",defaultValue:!0,control:{type:"boolean"}},spaceScaleType:{name:"Space scaling type",options:["linear","proportional"],defaultValue:"linear",control:{type:"radio"}},pickingTolerance:{name:"Picking tolerance",description:"(in pixels)",defaultValue:5,control:{type:"number",step:1,min:0,max:30}}}},Y={name:"Default arguments",args:{enableDragPaths:!0,enableMultiSelection:!0,spaceScaleType:"linear",pickingTolerance:5}},U=["DefaultArgs"];export{Y as DefaultArgs,U as __namedExportsOrder,X as default};
